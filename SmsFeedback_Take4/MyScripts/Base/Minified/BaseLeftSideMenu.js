"use strict";window.app=window.app||{};_.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/\{%([\s\S]+?)%\}/g,escape:/\{%-([\s\S]+?)%\}/g};window.app.MenuItemModel=Backbone.Model.extend({defaults:{itemId:1,itemName:"Conversation",leaf:false,parent:1}});window.app.MenuCollection=Backbone.Collection.extend({model:window.app.MenuItemModel,initialize:function(a){this.url=a.url}});window.app.MenuItemView=Backbone.View.extend({tagName:"li",model:app.MenuItemModel,initialize:function(){_.bindAll(this,"render")},renderParent:function(){$(this.el).addClass("outerLi");$(this.el).addClass("listItem");$(this.el).html("<div class='menuParentItem'>"+this.model.get("itemName")+"</div><ul class='item"+this.model.get("itemId")+"'></ul>");return this},renderLeaf:function(){$(this.el).addClass("innerLi");$(this.el).addClass("listItem");$(this.el).addClass("liItem"+this.model.get("itemId"));$(this.el).attr("menuId",this.model.get("itemId"));$(this.el).html("<span class='menuLeafItem' menuId='"+this.model.get("itemId")+"'>"+this.model.get("itemName")+"</span>");return this}});window.app.MenuView=Backbone.View.extend({el:$("#leftColumn"),eventToTriggerOnSelect:"defaultEventName",initialize:function(b){_.bindAll(this,"render");var a=this;a.eventToTriggerOnSelect=b.eventToTriggerOnSelect;this.menuItems=b.menuCollection;this.menuItems.fetch({success:function(){a.render()}})},render:function(){var a=this;$(this.el).append("<ul class='primaryList collapsibleList'></ul>");_(this.menuItems.models).each(function(c){var d=new window.app.MenuItemView({model:c});if(!c.get("leaf")){if(c.get("parent")==0){$("ul.primaryList",a.el).append(d.renderParent().el)}else{var b=".item"+c.get("parent");$(b,a.el).append(d.renderParent().el)}}else{var b=".item"+c.get("parent");$(b,a.el).append(d.renderLeaf().el)}});$(".innerLi").click(function(){$(this).parents(".collapsibleList").find(".menuItemSelected").removeClass("menuItemSelected");$(this).addClass("menuItemSelected");$(document).trigger(a.eventToTriggerOnSelect,$(this).attr("menuId"))});CollapsibleLists.apply()}});