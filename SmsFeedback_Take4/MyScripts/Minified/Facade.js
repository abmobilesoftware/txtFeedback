window.app=window.app||{};window.app.calendarCulture="en-GB";window.app.appStartTime="";window.app.pageTitle=document.title;function newMessageReceivedGUI(j,c,e,a,b,d,f,i,h,g){j.newMessageReceived(e,a,b,f,i,h,g);c.messagesView.newMessageReceived(e,b,d,f,i,h,g)}function resetMessagesViewToInitialState(a){a.messagesView.resetViewToDefault()}function refreshConversationList(a,b){a.getConversations();resetMessagesViewToInitialState(b)}function messageSuccessfullySent(b,a){b.messagesView.messageSuccessfullySent(a)}function acknowledgeFromClient(b,a){b.messagesView.setAcknowledgeFromClient(a)}function InitializeGUI(){var a=this;if(window.Prototype){delete Object.prototype.toJSON;delete Array.prototype.toJSON;delete String.prototype.toJSON}window.app.appStartTime=new Date();this.filterArea=new FilterArea();this.wpsArea=new window.app.WorkingPointsArea();this.wpsView=this.wpsArea.wpPoolView;this.convArea=new ConversationArea(a.filterArea,a.wpsArea);this.convView=this.convArea.convsView;this.tagsArea=TagsArea();this.msgView=new MessagesArea(a.convView,a.tagsArea,a.wpsArea);this.wpsView.getWorkingPoints(function(){a.convView.getConversations()});window.app.nrOfUnreadConvs=0;window.app.requestIndex=0;$(document).bind("msgReceived",function(b,c){newMessageReceivedGUI(a.convView,a.msgView,c.fromID,c.toID,c.convID,c.msgID,c.dateReceived,c.text,c.readStatus,c.isSmsBased)});$(document).bind("refreshConversationList",function(b,c){refreshConversationList(a.convView,a.msgView)});$(document).bind("selectedConvDeleted",function(b,c){resetMessagesViewToInitialState(a.msgView)});$(document).bind("serverAcknowledge",function(b,c){messageSuccessfullySent(a.msgView,c.message)});$(document).bind("clientAcknowledge",function(b,c){acknowledgeFromClient(a.msgView,c.message)});resizeTriggered();window.app.startReconnectTimer()}$(document).ready(function(){$(".menuItem a").click(function(){$(".menuItem .active-link").removeClass("active-link");$(this).addClass("active-link")});window.app=window.app||{};var a=$(".currentCulture").val().substring(0,2).toLowerCase();if(a==="en"){window.app.calendarCulture="en-GB"}else{window.app.calendarCulture=a}});