window.app=window.app||{};window.app.calendarCulture="en-GB";function newMessageReceivedGUI(j,c,e,a,b,d,f,i,h,g){j.newMessageReceived(e,a,b,f,i,h,g);c.messagesView.newMessageReceived(e,b,d,f,i,h,g)}function refreshConversationList(a,b){a.getConversations();b.messagesView.resetViewToDefault()}function resizeTriggered(){var k=5;var b=4;var c=10;var e=45;var l=window.innerHeight;var a=$("#messagesArea").height();var i=5;var f=$("header").height()+i;var g=l-f-(k+b)-e;var d=a+c;var h=140;var j=400;if(g<=d){$(".container_12").height(d);$("#scrollablemessagebox").height(j);$("#scrollableconversations").height($("#messagesArea").height()+8)}else{$(".container_12").height(g);$("#scrollablemessagebox").height(g-h);$("#scrollableconversations").height($("#messagesArea").height()+8)}}function InitializeGUI(){var a=this;if(window.Prototype){delete Object.prototype.toJSON;delete Array.prototype.toJSON;delete String.prototype.toJSON}this.filterArea=new FilterArea();this.wpsArea=new window.app.WorkingPointsArea();this.wpsView=this.wpsArea.wpPoolView;this.convArea=new ConversationArea(a.filterArea,a.wpsArea);this.convView=this.convArea.convsView;this.tagsArea=TagsArea();this.msgView=new MessagesArea(a.convView,a.tagsArea,a.wpsArea);this.wpsView.getWorkingPoints(function(){a.convView.getConversations()});window.app.nrOfUnreadConvs=0;window.app.requestIndex=0;$(document).bind("msgReceived",function(b,c){newMessageReceivedGUI(a.convView,a.msgView,c.fromID,c.toID,c.convID,c.msgID,c.dateReceived,c.text,c.readStatus,c.isSmsBased)});$(document).bind("refreshConversationList",function(b,c){refreshConversationList(a.convView,a.msgView)});if(!window.addEventListener){window.attachEvent("resize",resizeTriggered)}else{window.addEventListener("resize",resizeTriggered,false)}resizeTriggered()}$(document).ready(function(){$(".menuItem a").click(function(){$(".menuItem .active-link").removeClass("active-link");$(this).addClass("active-link")});window.app=window.app||{};var a=$(".currentCulture").val().substring(0,2).toLowerCase();if(a==="en"){window.app.calendarCulture="en-GB"}else{window.app.calendarCulture=a}});