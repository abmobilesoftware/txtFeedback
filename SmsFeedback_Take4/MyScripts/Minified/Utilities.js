window.app=window.app||{};function StatusBar(d,a){var c=this;var b=null;this.elementId="_showstatus";this.prependMultiline=true;this.showCloseButton=true;this.afterTimeoutText=null;this.cssClass="statusbar";this.highlightClass="statusbarhighlight";this.errorClass="statuserror";this.closeButtonClass="statusbarclose";this.additive=false;$.extend(this,a);if(d){b=$(d)}if(!b){b=$("<div id='_statusbar' class='"+c.cssClass+"'><div class='"+c.closeButtonClass+"'>"+(c.showCloseButton?" X </div></div>":"")).appendTo(document.body).show()}if(c.showCloseButton){$("."+c.cssClass).click(function(f){$(b).hide()})}this.show=function(h,i,g){if(c.additive){var f="<div style='margin-bottom: 2px;' >"+h+"</div>";if(c.prependMultiline){b.prepend(f)}else{b.append(f)}}else{if(!c.showCloseButton){b.text(h)}else{var e=b.find("div.statusbarclose");b.text(h).prepend(e)}}b.show();if(i){if(g){b.addClass(c.errorClass)}else{b.addClass(c.highlightClass)}setTimeout(function(){b.removeClass(c.highlightClass);if(c.afterTimeoutText){c.show(c.afterTimeoutText)}},i)}};this.release=function(){if(_statusbar){$(_statusbar).remove()}}}var _statusbar=null;var cConversationIdNumbersSeparator="-";function showStatus(c,d,a,b){}window.app.domainName="/smsfeedback";window.app.firstCall=true;window.app.requestIndex=0;function getFromToFromConversation(b){var a=b.split(cConversationIdNumbersSeparator);return a}function buildConversationID(b,a){return cleanupPhoneNumber(b)+cConversationIdNumbersSeparator+cleanupPhoneNumber(a)}function comparePhoneNumbers(b,a){return cleanupPhoneNumber(b)===cleanupPhoneNumber(a)}function cleanupPhoneNumber(c){var b=new Array("00","\\+");var a=new RegExp("^("+b.join("|")+")","g");c=c.replace(a,"");return c}function setCheckboxState(b,a){if(a===true){b.attr("src",app.domainName+"/Content/images/check-white.svg");b.removeClass("deletePhoneNumberIconUnselected");b.addClass("deletePhoneNumberIconSelected")}else{b.attr("src",app.domainName+"/Content/images/transparent.gif");b.removeClass("deletePhoneNumberIconSelected");b.addClass("deletePhoneNumberIconUnselected")}}window.app.updateNrOfUnreadConversations=function(a){console.log("updateNrOfUnreadConversations called");$.getJSON("Messages/NrOfUnreadConversations",{performUpdateBefore:a},function(b){if(b!=null){console.log("new value for nr of conversations received");app.setNrOfUnreadConversationOnTab(b.Value)}})};$(function(){$(window).unload(function(){var a=new Persist.Store("SmsFeedback");a.set("msgTabcountValue",$("#msgTabcount").text())})});$(function(){var a=new Persist.Store("SmsFeedback");a.get("msgTabcountValue",function(b,c){if(b){$("#msgTabcount").text(c)}})});$.fn.qtip.styles.txtFeedback={tip:"bottomMiddle",target:"bottomMiddle",border:{width:5,radius:6,color:"#FA6900"},background:"#333",color:"#FFF"};