"use strict";window.app=window.app||{};window.app.dateFormatForDatePicker="dd-mm-yy";window.app.defaultFilteringOptions={tagsForFiltering:[],tagFilteringEnabled:false,dateFilteringEnabled:false,startDate:"",endDate:"",starredFilteringEnabled:false,unreadFilteringEnabled:false};function FilterArea(){var a=this;$.extend(this,app.defaultFilteringOptions);$("#filterTag").tagsInput({height:"22px",width:"auto",autocomplete_url:"Tags/FindMatchingTags",onAddTag:function(e){var d=",";a.tagsForFiltering=$("#filterTag").val().split(d);if(a.tagFilteringEnabled){$(document).trigger("refreshConversationList")}},onRemoveTag:function(e){var d=",";a.tagsForFiltering=$("#filterTag").val().split(d);if(""===a.tagsForFiltering[0]){a.tagsForFiltering=[]}if(a.tagFilteringEnabled){$(document).trigger("refreshConversationList")}}});$("#includeTagsInFilter").bind("click",function(){if(a.tagFilteringEnabled){a.tagFilteringEnabled=false}else{a.tagFilteringEnabled=true}setCheckboxState($(this),a.tagFilteringEnabled);if(a.tagsForFiltering.length!=0){$(document).trigger("refreshConversationList")}});this.previousStartDate="";this.defaultStartDate=this.startDate;var c=$("#startDateTimePicker");if(c.length!==0){c.datepicker({dateFormat:app.dateFormatForDatePicker,onClose:function(e,d){if(a.previousStartDate!==e){a.previousStartDate=e;a.startDate=e;if(a.dateFilteringEnabled){$(document).trigger("refreshConversationList")}}}});this.previousStartDate=$.datepicker.formatDate(app.dateFormatForDatePicker,c.datepicker("getDate"));this.defaultStartDate=$.datepicker.formatDate(app.dateFormatForDatePicker,c.datepicker("getDate"))}var b=$("#endDateTimePicker");this.previousEndDate="";this.defaultEndDate=this.endDate;if(b.length!==0){b.datepicker({dateFormat:app.dateFormatForDatePicker,onClose:function(e,d){if(a.previousEndDate!==e){a.previousEndDate=e;a.endDate=e;if(a.dateFilteringEnabled){$(document).trigger("refreshConversationList")}}}});this.previousEndDate=$.datepicker.formatDate(app.dateFormatForDatePicker,b.datepicker("getDate"));this.defaultEndDate=$.datepicker.formatDate(app.dateFormatForDatePicker,b.datepicker("getDate"))}$("#includeDateInFilter").bind("click",function(){a.dateFilteringEnabled=!a.dateFilteringEnabled;setCheckboxState($(this),a.dateFilteringEnabled);var g=$("#startDateTimePicker");var f=$.datepicker.formatDate(app.dateFormatForDatePicker,g.datepicker("getDate"));var e=$("#endDateTimePicker");var d=$.datepicker.formatDate(app.dateFormatForDatePicker,e.datepicker("getDate"));if(a.defaultStartDate!==f||a.defaultEndDate!==d){a.startDate=f;a.endDate=d;$(document).trigger("refreshConversationList")}});$("#includeStarredInFilter").bind("click",function(){a.starredFilteringEnabled=!a.starredFilteringEnabled;setCheckboxState($(this),a.starredFilteringEnabled);$(document).trigger("refreshConversationList")});$("#includeUnreadInFilter").bind("click",function(){a.unreadFilteringEnabled=!a.unreadFilteringEnabled;setCheckboxState($(this),a.unreadFilteringEnabled);$(document).trigger("refreshConversationList")});this.IsFilteringEnabled=function(){return a.tagFilteringEnabled||a.dateFilteringEnabled||a.starredFilteringEnabled||a.unreadFilteringEnabled};$("#includeDateInFilter,#includeStarredInFilter,#includeUnreadInFilter,#includeTagsInFilter").each(function(){$(this).qtip({content:{text:false},style:"light"})})};