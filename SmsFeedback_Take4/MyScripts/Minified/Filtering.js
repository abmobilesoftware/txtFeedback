window.app=window.app||{};window.app.dateFormatForDatePicker="dd/mm/yy";window.app.defaultFilteringOptions={tagsForFiltering:[],tagFilteringEnabled:false,dateFilteringEnabled:false,startDate:"",endDate:"",starredFilteringEnabled:false,unreadFilteringEnabled:false,supportFilteringEnabled:false};function Filter(c,d){var a=c;var b=d;this.getElementName=function(){return a};this.getBehindVariable=function(){return b}}function FilterArea(){var self=this;$.extend(this,window.app.defaultFilteringOptions);var filtersList=[];var tagsFilter=new Filter("#includeTagsInFilter","self.tagFilteringEnabled");var unreadFilter=new Filter("#includeUnreadInFilter","self.unreadFilteringEnabled");var starredFilter=new Filter("#includeStarredInFilter","self.starredFilteringEnabled");var supportFilter=new Filter("#includeSupportInFilter","self.supportFilteringEnabled");filtersList.push(tagsFilter);filtersList.push(unreadFilter);filtersList.push(starredFilter);this.deactivateFilters=function(){for(var i=0;i<filtersList.length;++i){var behindVariableValue=eval(filtersList[i].getBehindVariable());if(behindVariableValue===true){eval(filtersList[i].getBehindVariable()+"=false")}setCheckboxState($(filtersList[i].getElementName()),eval(filtersList[i].getBehindVariable()))}};this.deactivateFilter=function(filter){var behindVariableValue=eval(filter.getBehindVariable());if(behindVariableValue===true){eval(filter.getBehindVariable()+"=false")}setCheckboxState($(filter.getElementName()),eval(filter.getBehindVariable()))};this.toggleFilter=function(filter){var behindVariableValue=eval(filter.getBehindVariable());if(behindVariableValue===true){eval(filter.getBehindVariable()+"=false")}else{if(behindVariableValue===false){eval(filter.getBehindVariable()+"=true")}}setCheckboxState($(filter.getElementName()),eval(filter.getBehindVariable()))};var placeholderMessage=$("#filteringAddFilterTagMessage").val();var removeTagValue=$("#messagesRemoveTagPlaceHolderMessage").val();window.app.removeTagTitle=removeTagValue;$("#filterTag").tagsInput({height:"22px",width:"auto",autocomplete_url:"Tags/FindMatchingTags",onAddTag:function(tagValue){var delimiter=",";self.tagsForFiltering=$("#filterTag").val().split(delimiter);if(self.tagFilteringEnabled){$(document).trigger("refreshConversationList")}},onRemoveTag:function(tagValue){var delimiter=",";self.tagsForFiltering=$("#filterTag").val().split(delimiter);if(""===self.tagsForFiltering[0]){self.tagsForFiltering=[]}if(self.tagFilteringEnabled){$(document).trigger("refreshConversationList")}},defaultText:placeholderMessage,placeholder:placeholderMessage,interactve:true,placeholderColor:"#666666"});$("#includeTagsInFilter").bind("click",function(){if(!self.tagFilteringEnabled){self.deactivateFilter(supportFilter)}self.toggleFilter(tagsFilter);if(self.tagsForFiltering.length!==0){$(document).trigger("refreshConversationList")}});$("#includeStarredInFilter").bind("click",function(){if(!self.starredFilteringEnabled){self.deactivateFilter(supportFilter)}self.toggleFilter(starredFilter);$(document).trigger("refreshConversationList")});$("#includeUnreadInFilter").bind("click",function(){if(!self.unreadFilteringEnabled){self.deactivateFilter(supportFilter)}self.toggleFilter(unreadFilter);$(document).trigger("refreshConversationList")});$("#includeSupportInFilter").bind("click",function(){if(!self.supportFilteringEnabled){self.deactivateFilters()}self.toggleFilter(supportFilter);$(document).trigger("refreshConversationList")});this.IsFilteringEnabled=function(){return self.tagFilteringEnabled||self.dateFilteringEnabled||self.starredFilteringEnabled||self.unreadFilteringEnabled};$("#includeDateInFilter, #includeStarredInFilter, #includeUnreadInFilter, #includeTagsInFilter, #includeSupportInFilter").each(function(){var elementToShowTooltipOn=$(this);setTooltipOnElement(elementToShowTooltipOn,elementToShowTooltipOn.attr("tooltiptitle"),"light")})};