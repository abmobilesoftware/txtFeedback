"use strict";window.app=window.app||{};window.app.dateFormatForDatePicker="dd-mm-yy";window.app.defaultFilteringOptions={tagsForFiltering:[],tagFilteringEnabled:false,dateFilteringEnabled:false,startDate:"",endDate:"",starredFilteringEnabled:false,unreadFilteringEnabled:false};function FilterArea(){var a=this;$.extend(this,app.defaultFilteringOptions);$("#filterTag").tagsInput({height:"22px",width:"auto",autocomplete_url:"Tags/FindMatchingTags",onAddTag:function(g){var f=",";a.tagsForFiltering=$("#filterTag").val().split(f);if(a.tagFilteringEnabled){$(document).trigger("refreshConversationList")}},onRemoveTag:function(g){var f=",";a.tagsForFiltering=$("#filterTag").val().split(f);if(""===a.tagsForFiltering[0]){a.tagsForFiltering=[]}if(a.tagFilteringEnabled){$(document).trigger("refreshConversationList")}}});$("#includeTagsInFilter").bind("click",function(){if(a.tagFilteringEnabled){a.tagFilteringEnabled=false}else{a.tagFilteringEnabled=true}setCheckboxState($(this),a.tagFilteringEnabled);if(a.tagsForFiltering.length!=0){$(document).trigger("refreshConversationList")}});this.previousStartDate="";this.defaultStartDate=this.startDate;var e=$("#startDateTimePicker");if(e.length!==0){e.datepicker({changeMonth:true,numberOfMonths:3,dateFormat:app.dateFormatForDatePicker,onClose:function(g,f){if(a.previousStartDate!==g){a.previousStartDate=g;a.startDate=g;if(a.dateFilteringEnabled){$(document).trigger("refreshConversationList")}}},onSelect:function(f){$("#endDateTimePicker").datepicker("option","minDate",f)}});this.previousStartDate=$.datepicker.formatDate(app.dateFormatForDatePicker,e.datepicker("getDate"));this.defaultStartDate=$.datepicker.formatDate(app.dateFormatForDatePicker,e.datepicker("getDate"))}var b=$("#endDateTimePicker");this.previousEndDate="";this.defaultEndDate=this.endDate;if(b.length!==0){b.datepicker({changeMonth:true,numberOfMonths:3,dateFormat:app.dateFormatForDatePicker,onClose:function(g,f){if(a.previousEndDate!==g){a.previousEndDate=g;a.endDate=g;if(a.dateFilteringEnabled){$(document).trigger("refreshConversationList")}}},onSelect:function(f){$("#startDateTimePicker").datepicker("option","maxDate",f)}});var d=$("#startDateTimePicker").val();var c=$("#endDateTimePicker").val();$("#startDateTimePicker").datepicker("option",$.datepicker.regional[window.app.calendarCulture]);$("#endDateTimePicker").datepicker("option",$.datepicker.regional[window.app.calendarCulture]);$("#startDateTimePicker").val(d);$("#endDateTimePicker").val(c);this.previousEndDate=$.datepicker.formatDate(app.dateFormatForDatePicker,b.datepicker("getDate"));this.defaultEndDate=$.datepicker.formatDate(app.dateFormatForDatePicker,b.datepicker("getDate"))}$("#includeDateInFilter").bind("click",function(){a.dateFilteringEnabled=!a.dateFilteringEnabled;setCheckboxState($(this),a.dateFilteringEnabled);var i=$("#startDateTimePicker");var h=$.datepicker.formatDate(app.dateFormatForDatePicker,i.datepicker("getDate"));var g=$("#endDateTimePicker");var f=$.datepicker.formatDate(app.dateFormatForDatePicker,g.datepicker("getDate"));if(a.defaultStartDate!==h||a.defaultEndDate!==f){a.startDate=h;a.endDate=f;$(document).trigger("refreshConversationList")}});$("#includeStarredInFilter").bind("click",function(){a.starredFilteringEnabled=!a.starredFilteringEnabled;setCheckboxState($(this),a.starredFilteringEnabled);$(document).trigger("refreshConversationList")});$("#includeUnreadInFilter").bind("click",function(){a.unreadFilteringEnabled=!a.unreadFilteringEnabled;setCheckboxState($(this),a.unreadFilteringEnabled);$(document).trigger("refreshConversationList")});this.IsFilteringEnabled=function(){return a.tagFilteringEnabled||a.dateFilteringEnabled||a.starredFilteringEnabled||a.unreadFilteringEnabled};$("#includeDateInFilter,#includeStarredInFilter,#includeUnreadInFilter,#includeTagsInFilter").each(function(){var f=$(this);setTooltipOnElement(f,f.attr("tooltiptitle"),"light")})};