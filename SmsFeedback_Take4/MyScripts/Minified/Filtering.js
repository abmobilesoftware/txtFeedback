"use strict";window.app=window.app||{};window.app.dateFormatForDatePicker="dd/mm/yy";window.app.defaultFilteringOptions={tagsForFiltering:[],tagFilteringEnabled:false,dateFilteringEnabled:false,startDate:"",endDate:"",starredFilteringEnabled:false,unreadFilteringEnabled:false,supportFilteringEnabled:false};function FilterArea(){var b=this;$.extend(this,app.defaultFilteringOptions);var d=$("#filteringAddFilterTagMessage").val();$("#filterTag").tagsInput({height:"22px",width:"auto",autocomplete_url:"Tags/FindMatchingTags",onAddTag:function(i){var h=",";b.tagsForFiltering=$("#filterTag").val().split(h);if(b.tagFilteringEnabled){$(document).trigger("refreshConversationList")}},onRemoveTag:function(i){var h=",";b.tagsForFiltering=$("#filterTag").val().split(h);if(""===b.tagsForFiltering[0]){b.tagsForFiltering=[]}if(b.tagFilteringEnabled){$(document).trigger("refreshConversationList")}},defaultText:d,placeholder:d,interactve:true,placeholderColor:"#666666"});$("#includeTagsInFilter").bind("click",function(){if(b.tagFilteringEnabled){b.tagFilteringEnabled=false}else{b.tagFilteringEnabled=true}setCheckboxState($(this),b.tagFilteringEnabled);if(b.tagsForFiltering.length!=0){$(document).trigger("refreshConversationList")}});$("#includeTagsInFilter").bind("click",function(){if(b.tagFilteringEnabled){b.tagFilteringEnabled=false}else{b.tagFilteringEnabled=true}setCheckboxState($(this),b.tagFilteringEnabled);if(b.tagsForFiltering.length!=0){$(document).trigger("refreshConversationList")}});this.previousStartDate="";this.defaultStartDate=this.startDate;var g=$("#startDateTimePicker");if(g.length!==0){g.datepicker({changeMonth:true,numberOfMonths:3,dateFormat:app.dateFormatForDatePicker,onClose:function(i,h){if(b.previousStartDate!==i){b.previousStartDate=i;b.startDate=i;if(b.dateFilteringEnabled){$(document).trigger("refreshConversationList")}}}});this.previousStartDate=$.datepicker.formatDate(app.dateFormatForDatePicker,g.datepicker("getDate"));this.defaultStartDate=$.datepicker.formatDate(app.dateFormatForDatePicker,g.datepicker("getDate"))}var c=$("#endDateTimePicker");this.previousEndDate="";this.defaultEndDate=this.endDate;if(c.length!==0){c.datepicker({changeMonth:true,numberOfMonths:3,dateFormat:app.dateFormatForDatePicker,onClose:function(i,h){if(b.previousEndDate!==i){b.previousEndDate=i;b.endDate=i;if(b.dateFilteringEnabled){$(document).trigger("refreshConversationList")}}}});var f=$("#startDateTimePicker").val();var e=$("#endDateTimePicker").val();$.datepicker.regional[window.app.calendarCulture].dateFormat=window.app.dateFormatForDatePicker;var a=$.datepicker.regional[window.app.calendarCulture];$("#startDateTimePicker").datepicker("option",a);$("#endDateTimePicker").datepicker("option",a);$("#startDateTimePicker").val(f);$("#endDateTimePicker").val(e);this.previousEndDate=$.datepicker.formatDate(app.dateFormatForDatePicker,c.datepicker("getDate"));this.defaultEndDate=$.datepicker.formatDate(app.dateFormatForDatePicker,c.datepicker("getDate"))}$("#includeDateInFilter").bind("click",function(){b.dateFilteringEnabled=!b.dateFilteringEnabled;setCheckboxState($(this),b.dateFilteringEnabled);var k=$("#startDateTimePicker");var j=$.datepicker.formatDate(app.dateFormatForDatePicker,k.datepicker("getDate"));var i=$("#endDateTimePicker");var h=$.datepicker.formatDate(app.dateFormatForDatePicker,i.datepicker("getDate"));if(b.defaultStartDate!==j||b.defaultEndDate!==h){b.startDate=j;b.endDate=h;$(document).trigger("refreshConversationList")}});$("#includeStarredInFilter").bind("click",function(){b.starredFilteringEnabled=!b.starredFilteringEnabled;setCheckboxState($(this),b.starredFilteringEnabled);$(document).trigger("refreshConversationList")});$("#includeUnreadInFilter").bind("click",function(){b.unreadFilteringEnabled=!b.unreadFilteringEnabled;setCheckboxState($(this),b.unreadFilteringEnabled);$(document).trigger("refreshConversationList")});$("#includeSupportInFilter").bind("click",function(){b.supportFilteringEnabled=!b.supportFilteringEnabled;setCheckboxState($(this),b.supportFilteringEnabled);$(document).trigger("refreshConversationList")});this.IsFilteringEnabled=function(){return b.tagFilteringEnabled||b.dateFilteringEnabled||b.starredFilteringEnabled||b.unreadFilteringEnabled};$("#includeDateInFilter, #includeStarredInFilter, #includeUnreadInFilter, #includeTagsInFilter, #includeSupportInFilter").each(function(){var h=$(this);setTooltipOnElement(h,h.attr("tooltiptitle"),"light")})};