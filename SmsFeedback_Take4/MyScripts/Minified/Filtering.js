"use strict";window.app=window.app||{};window.app.dateFormatForDatePicker="dd-mm-yy";window.app.defaultFilteringOptions={tagsForFiltering:[],tagFilteringEnabled:false,dateFilteringEnabled:false,startDate:"",endDate:"",starredFilteringEnabled:false,unreadFilteringEnabled:false};function FilterArea(){var a=this;$.extend(this,app.defaultFilteringOptions);var c=$("#filteringAddFilterTagMessage").val();$("#filterTag").tagsInput({height:"22px",width:"auto",autocomplete_url:"Tags/FindMatchingTags",onAddTag:function(h){var g=",";a.tagsForFiltering=$("#filterTag").val().split(g);if(a.tagFilteringEnabled){$(document).trigger("refreshConversationList")}},onRemoveTag:function(h){var g=",";a.tagsForFiltering=$("#filterTag").val().split(g);if(""===a.tagsForFiltering[0]){a.tagsForFiltering=[]}if(a.tagFilteringEnabled){$(document).trigger("refreshConversationList")}},defaultText:c,placeholder:c,interactve:true,placeholderColor:"#666666"});$("#includeTagsInFilter").bind("click",function(){if(a.tagFilteringEnabled){a.tagFilteringEnabled=false}else{a.tagFilteringEnabled=true}setCheckboxState($(this),a.tagFilteringEnabled);if(a.tagsForFiltering.length!=0){$(document).trigger("refreshConversationList")}});this.previousStartDate="";this.defaultStartDate=this.startDate;var f=$("#startDateTimePicker");if(f.length!==0){f.datepicker({dateFormat:app.dateFormatForDatePicker,onClose:function(h,g){if(a.previousStartDate!==h){a.previousStartDate=h;a.startDate=h;if(a.dateFilteringEnabled){$(document).trigger("refreshConversationList")}}}});this.previousStartDate=$.datepicker.formatDate(app.dateFormatForDatePicker,f.datepicker("getDate"));this.defaultStartDate=$.datepicker.formatDate(app.dateFormatForDatePicker,f.datepicker("getDate"))}var b=$("#endDateTimePicker");this.previousEndDate="";this.defaultEndDate=this.endDate;if(b.length!==0){b.datepicker({dateFormat:app.dateFormatForDatePicker,onClose:function(h,g){if(a.previousEndDate!==h){a.previousEndDate=h;a.endDate=h;if(a.dateFilteringEnabled){$(document).trigger("refreshConversationList")}}}});var e=$("#startDateTimePicker").val();var d=$("#endDateTimePicker").val();$("#startDateTimePicker").datepicker("option",$.datepicker.regional[window.app.calendarCulture]);$("#endDateTimePicker").datepicker("option",$.datepicker.regional[window.app.calendarCulture]);$("#startDateTimePicker").val(e);$("#endDateTimePicker").val(d);this.previousEndDate=$.datepicker.formatDate(app.dateFormatForDatePicker,b.datepicker("getDate"));this.defaultEndDate=$.datepicker.formatDate(app.dateFormatForDatePicker,b.datepicker("getDate"))}$("#includeDateInFilter").bind("click",function(){a.dateFilteringEnabled=!a.dateFilteringEnabled;setCheckboxState($(this),a.dateFilteringEnabled);var j=$("#startDateTimePicker");var i=$.datepicker.formatDate(app.dateFormatForDatePicker,j.datepicker("getDate"));var h=$("#endDateTimePicker");var g=$.datepicker.formatDate(app.dateFormatForDatePicker,h.datepicker("getDate"));if(a.defaultStartDate!==i||a.defaultEndDate!==g){a.startDate=i;a.endDate=g;$(document).trigger("refreshConversationList")}});$("#includeStarredInFilter").bind("click",function(){a.starredFilteringEnabled=!a.starredFilteringEnabled;setCheckboxState($(this),a.starredFilteringEnabled);$(document).trigger("refreshConversationList")});$("#includeUnreadInFilter").bind("click",function(){a.unreadFilteringEnabled=!a.unreadFilteringEnabled;setCheckboxState($(this),a.unreadFilteringEnabled);$(document).trigger("refreshConversationList")});this.IsFilteringEnabled=function(){return a.tagFilteringEnabled||a.dateFilteringEnabled||a.starredFilteringEnabled||a.unreadFilteringEnabled};$("#includeDateInFilter,#includeStarredInFilter,#includeUnreadInFilter,#includeTagsInFilter").each(function(){var g=$(this);setTooltipOnElement(g,g.attr("tooltiptitle"),"light")})};