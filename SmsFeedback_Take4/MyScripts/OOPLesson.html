<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>OOPLesson</title>
    <script type="text/javascript">
        window.app = window.app || {};
        //window.app.id = "";
        //window.app.pass = "";
        window.app.xmppConn = {};
        function XMPPConnect() {
            this.connect = function (userid, password) {
                this.id = userid;
                this.pass = password;
                window.app.xmppConn = this;
                //var self = this;
                var strophe = new Strophe(this.connectCallback);
                strophe.disconnect();
            };
            this.connectCallback = function (status) {                
                alert("My user is " + app.xmppConn.id + " & password = " + app.xmppConn.pass);
                 app.xmppConn.connect(app.xmppConn.id, app.xmppConn.pass);
            }
        }

        

         XMPPConnect.prototype.disconnect = function () {
             alert("My user is " + this.id + " & password = " + this.pass);
         }

         XMPPConnect.prototype.handlePacket = function () {
             alert("My user is " + this.id + " & password = " + this.pass);
         }

         function init() {
             alert("Initialize");
             var conn = new XMPPConnect();
             conn.connect("Mike", 123456);
             conn.disconnect();

         }

         function Strophe(eventHandler) {
             this.id = "strophe id";
             this.pass = "strophe pass";
             this.handler = eventHandler;
             eventHandler();
         }

         Strophe.prototype.disconnect = function () {
             this.handler();
         }
   </script>
</head>
<body onload="init()">
    
   
</body>
</html>
